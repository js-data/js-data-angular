/**
* @author Jason Dobry <jason.dobry@gmail.com>
* @file angular-data.min.js
* @version 1.5.3 - Homepage <http://angular-data.pseudobry.com/>
* @copyright (c) 2014 Jason Dobry <https://github.com/jmdobry/>
* @license MIT <https://github.com/jmdobry/angular-data/blob/master/LICENSE>
*
* @overview Data store for Angular.js.
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(require,module,exports){!function(global){"use strict";function detectObjectObserve(){function a(a){b=a}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var b=[],c={},d=[];return Object.observe(c,a),Array.observe(d,a),c.id=1,c.id=2,delete c.id,d.push(1,2),d.length=0,Object.deliverChangeRecords(a),5!==b.length?!1:"add"!=b[0].type||"update"!=b[1].type||"delete"!=b[2].type||"splice"!=b[3].type||"splice"!=b[4].type?!1:(Object.unobserve(c,a),Array.unobserve(d,a),!0)}function detectEval(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;try{var a=new Function("","return true;");return a()}catch(b){return!1}}function dirtyCheck(a){for(var b=0;MAX_DIRTY_CHECK_CYCLES>b&&a.check_();)b++;return global.testingExposeCycleCount&&(global.dirtyCheckCycleCount=b),b>0}function objectIsEmpty(a){for(var b in a)return!1;return!0}function diffIsEmpty(a){return objectIsEmpty(a.added)&&objectIsEmpty(a.removed)&&objectIsEmpty(a.changed)}function isBlacklisted(a,b){if(!b||!b.length)return!1;for(var c,d=0;d<b.length;d++)if("[object RegExp]"===Object.prototype.toString.call(b[d])&&b[d].test(a)||b[d]===a)return c=a;return!!c}function diffObjectFromOldObject(a,b,c,d){var e={},f={},g={};for(var h in b){var i=a[h];isBlacklisted(h,d)||void 0!==i&&(c?c(i,b[h]):i===b[h])||(h in a?(c?c(i,b[h]):i===b[h])||(g[h]=i):f[h]=void 0)}for(var h in a)h in b||isBlacklisted(h,d)||(e[h]=a[h]);return Array.isArray(a)&&a.length!==b.length&&(g.length=a.length),{added:e,removed:f,changed:g}}function runEOMTasks(){if(!eomTasks.length)return!1;for(var a=0;a<eomTasks.length;a++)eomTasks[a]();return eomTasks.length=0,!0}function newObservedObject(){function a(a){b&&b.state_===OPENED&&!d&&b.check_(a)}var b,c,d=!1,e=!0;return{open:function(c){if(b)throw Error("ObservedObject in use");e||Object.deliverChangeRecords(a),b=c,e=!1},observe:function(b,d){c=b,d?Array.observe(c,a):Object.observe(c,a)},deliver:function(b){d=b,Object.deliverChangeRecords(a),d=!1},close:function(){b=void 0,Object.unobserve(c,a),observedObjectCache.push(this)}}}function getObservedObject(a,b,c){var d=observedObjectCache.pop()||newObservedObject();return d.open(a),d.observe(b,c),d}function Observer(){this.state_=UNOPENED,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=nextObserverId++}function addToAll(a){Observer._allObserversCount++,collectObservers&&allObservers.push(a)}function removeFromAll(){Observer._allObserversCount--}function ObjectObserver(a){Observer.call(this),this.value_=a,this.oldObject_=void 0}function diffObjectFromChangeRecords(a,b,c){for(var d={},e={},f=0;f<b.length;f++){var g=b[f];expectedRecordTypes[g.type]?(g.name in c||(c[g.name]=g.oldValue),"update"!=g.type&&("add"!=g.type?g.name in d?(delete d[g.name],delete c[g.name]):e[g.name]=!0:g.name in e?delete e[g.name]:d[g.name]=!0)):(console.error("Unknown changeRecord type: "+g.type),console.error(g))}for(var h in d)d[h]=a[h];for(var h in e)e[h]=void 0;var i={};for(var h in c)if(!(h in d||h in e)){var j=a[h];c[h]!==j&&(i[h]=j)}return{added:d,removed:e,changed:i}}var equalityFn=function(a,b){return a===b},blacklist=[],hasObserve=detectObjectObserve(),hasEval=detectEval(),createObject="__proto__"in{}?function(a){return a}:function(a){var b=a.__proto__;if(!b)return a;var c=Object.create(b);return Object.getOwnPropertyNames(a).forEach(function(b){Object.defineProperty(c,b,Object.getOwnPropertyDescriptor(a,b))}),c},MAX_DIRTY_CHECK_CYCLES=1e3,eomTasks=[],runEOM=hasObserve?function(){var a={pingPong:!0},b=!1;return Object.observe(a,function(){runEOMTasks(),b=!1}),function(c){eomTasks.push(c),b||(b=!0,a.pingPong=!a.pingPong)}}():function(){return function(a){eomTasks.push(a)}}(),observedObjectCache=[],UNOPENED=0,OPENED=1,CLOSED=2,nextObserverId=1;Observer.prototype={open:function(a,b){if(this.state_!=UNOPENED)throw Error("Observer has already been opened.");return addToAll(this),this.callback_=a,this.target_=b,this.connect_(),this.state_=OPENED,this.value_},close:function(){this.state_==OPENED&&(removeFromAll(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=CLOSED)},deliver:function(){this.state_==OPENED&&dirtyCheck(this)},report_:function(a){try{this.callback_.apply(this.target_,a)}catch(b){Observer._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(b.stack||b))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var collectObservers=!hasObserve,allObservers;Observer._allObserversCount=0,collectObservers&&(allObservers=[]);var runningMicrotaskCheckpoint=!1,hasDebugForceFullDelivery=hasObserve&&hasEval&&function(){try{return eval("%RunMicrotasks()"),!0}catch(ex){return!1}}();global.Platform=global.Platform||{},global.Platform.performMicrotaskCheckpoint=function(){if(!runningMicrotaskCheckpoint){if(hasDebugForceFullDelivery)return void eval("%RunMicrotasks()");if(collectObservers){runningMicrotaskCheckpoint=!0;var cycles=0,anyChanged,toCheck;do{cycles++,toCheck=allObservers,allObservers=[],anyChanged=!1;for(var i=0;i<toCheck.length;i++){var observer=toCheck[i];observer.state_==OPENED&&(observer.check_()&&(anyChanged=!0),allObservers.push(observer))}runEOMTasks()&&(anyChanged=!0)}while(MAX_DIRTY_CHECK_CYCLES>cycles&&anyChanged);global.testingExposeCycleCount&&(global.dirtyCheckCycleCount=cycles),runningMicrotaskCheckpoint=!1}}},collectObservers&&(global.Platform.clearObservers=function(){allObservers=[]}),ObjectObserver.prototype=createObject({__proto__:Observer.prototype,arrayObserve:!1,connect_:function(){hasObserve?this.directObserver_=getObservedObject(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(a){var b=Array.isArray(a)?[]:{};for(var c in a)b[c]=a[c];return Array.isArray(a)&&(b.length=a.length),b},check_:function(a){var b,c;if(hasObserve){if(!a)return!1;c={},b=diffObjectFromChangeRecords(this.value_,a,c)}else c=this.oldObject_,b=diffObjectFromOldObject(this.value_,this.oldObject_,equalityFn,blacklist);return diffIsEmpty(b)?!1:(hasObserve||(this.oldObject_=this.copyObject(this.value_)),this.report_([b.added||{},b.removed||{},b.changed||{},function(a){return c[a]}]),!0)},disconnect_:function(){hasObserve?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==OPENED&&(hasObserve?this.directObserver_.deliver(!1):dirtyCheck(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}});var observerSentinel={},expectedRecordTypes={add:!0,update:!0,"delete":!0};global.Observer=Observer,global.diffObjectFromOldObject=diffObjectFromOldObject,global.setEqualityFn=function(a){equalityFn=a},global.setBlacklist=function(a){blacklist=a},global.Observer.runEOM_=runEOM,global.Observer.observerSentinel_=observerSentinel,global.Observer.hasObjectObserve=hasObserve,global.ObjectObserver=ObjectObserver}((exports.Number={isNaN:window.isNaN})?exports:exports)},{}],2:[function(a,b){function c(a,b){return-1!==d(a,b)}var d=a("./indexOf");b.exports=c},{"./indexOf":5}],3:[function(a,b){function c(a,b,c){b=d(b,c);var e=[];if(null==a)return e;for(var f,g=-1,h=a.length;++g<h;)f=a[g],b(f,g,a)&&e.push(f);return e}var d=a("../function/makeIterator_");b.exports=c},{"../function/makeIterator_":12}],4:[function(a,b){function c(a,b,c){if(null!=a)for(var d=-1,e=a.length;++d<e&&b.call(c,a[d],d,a)!==!1;);}b.exports=c},{}],5:[function(a,b){function c(a,b,c){if(c=c||0,null==a)return-1;for(var d=a.length,e=0>c?d+c:c;d>e;){if(a[e]===b)return e;e++}return-1}b.exports=c},{}],6:[function(a,b){function c(a){return null!=a&&""!==a}function d(a,b){return b=b||"",e(a,c).join(b)}var e=a("./filter");b.exports=d},{"./filter":3}],7:[function(a,b){function c(a,b){var c=d(a,b);-1!==c&&a.splice(c,1)}var d=a("./indexOf");b.exports=c},{"./indexOf":5}],8:[function(a,b){function c(a,b,c){var d=a.length;b=null==b?0:0>b?Math.max(d+b,0):Math.min(b,d),c=null==c?d:0>c?Math.max(d+c,0):Math.min(c,d);for(var e=[];c>b;)e.push(a[b++]);return e}b.exports=c},{}],9:[function(a,b){function c(a,b){if(null==a)return[];if(a.length<2)return a;null==b&&(b=d);var f,g,h;return f=~~(a.length/2),g=c(a.slice(0,f),b),h=c(a.slice(f,a.length),b),e(g,h,b)}function d(a,b){return b>a?-1:a>b?1:0}function e(a,b,c){for(var d=[];a.length&&b.length;)d.push(c(a[0],b[0])<=0?a.shift():b.shift());return a.length&&d.push.apply(d,a),b.length&&d.push.apply(d,b),d}b.exports=c},{}],10:[function(a,b){function c(a,b){var c={};if(null==a)return c;var e,f=-1,g=a.length;if(d(b))for(;++f<g;)e=a[f],c[b(e)]=e;else for(;++f<g;)e=a[f],c[e[b]]=e;return c}var d=a("../lang/isFunction");b.exports=c},{"../lang/isFunction":19}],11:[function(a,b){function c(a){return a}b.exports=c},{}],12:[function(a,b){function c(a,b){if(null==a)return d;switch(typeof a){case"function":return"undefined"!=typeof b?function(c,d,e){return a.call(b,c,d,e)}:a;case"object":return function(b){return f(b,a)};case"string":case"number":return e(a)}}var d=a("./identity"),e=a("./prop"),f=a("../object/deepMatches");b.exports=c},{"../object/deepMatches":27,"./identity":11,"./prop":13}],13:[function(a,b){function c(a){return function(b){return b[a]}}b.exports=c},{}],14:[function(a,b){function c(a){switch(h(a)){case"Object":return d(a);case"Array":return g(a);case"RegExp":return e(a);case"Date":return f(a);default:return a}}function d(a){return i(a)?j({},a):a}function e(a){var b="";return b+=a.multiline?"m":"",b+=a.global?"g":"",b+=a.ignoreCase?"i":"",new RegExp(a.source,b)}function f(a){return new Date(+a)}function g(a){return a.slice()}var h=a("./kindOf"),i=a("./isPlainObject"),j=a("../object/mixIn");b.exports=c},{"../object/mixIn":34,"./isPlainObject":22,"./kindOf":23}],15:[function(a,b){function c(a,b){switch(h(a)){case"Object":return d(a,b);case"Array":return e(a,b);default:return f(a)}}function d(a,b){if(i(a)){var d={};return g(a,function(a,d){this[d]=c(a,b)},d),d}return b?b(a):a}function e(a,b){for(var d=[],e=-1,f=a.length;++e<f;)d[e]=c(a[e],b);return d}var f=a("./clone"),g=a("../object/forOwn"),h=a("./kindOf"),i=a("./isPlainObject");b.exports=c},{"../object/forOwn":30,"./clone":14,"./isPlainObject":22,"./kindOf":23}],16:[function(a,b){var c=a("./isKind"),d=Array.isArray||function(a){return c(a,"Array")};b.exports=d},{"./isKind":20}],17:[function(a,b){function c(a){return d(a,"Boolean")}var d=a("./isKind");b.exports=c},{"./isKind":20}],18:[function(a,b){function c(a){if(null==a)return!0;if("string"==typeof a||e(a))return!a.length;if("object"==typeof a){var b=!0;return d(a,function(){return b=!1,!1}),b}return!0}var d=a("../object/forOwn"),e=a("./isArray");b.exports=c},{"../object/forOwn":30,"./isArray":16}],19:[function(a,b){function c(a){return d(a,"Function")}var d=a("./isKind");b.exports=c},{"./isKind":20}],20:[function(a,b){function c(a,b){return d(a)===b}var d=a("./kindOf");b.exports=c},{"./kindOf":23}],21:[function(a,b){function c(a){return d(a,"Object")}var d=a("./isKind");b.exports=c},{"./isKind":20}],22:[function(a,b){function c(a){return!!a&&"object"==typeof a&&a.constructor===Object}b.exports=c},{}],23:[function(a,b){function c(a){return null===a?"Null":a===d?"Undefined":e.exec(f.call(a))[1]}var d,e=/^\[object (.*)\]$/,f=Object.prototype.toString;b.exports=c},{}],24:[function(a,b){function c(a){return null==a?"":a.toString()}b.exports=c},{}],25:[function(a,b){b.exports=2147483647},{}],26:[function(a,b){b.exports=-2147483648},{}],27:[function(a,b){function c(a,b){for(var c=-1,d=a.length;++c<d;)if(f(a[c],b))return!0;return!1}function d(a,b){for(var d=-1,e=b.length;++d<e;)if(!c(a,b[d]))return!1;return!0}function e(a,b){var c=!0;return g(b,function(b,d){return f(a[d],b)?void 0:c=!1}),c}function f(a,b){return a&&"object"==typeof a?h(a)&&h(b)?d(a,b):e(a,b):a===b}var g=a("./forOwn"),h=a("../lang/isArray");b.exports=f},{"../lang/isArray":16,"./forOwn":30}],28:[function(a,b){function c(a){for(var b,c=0,f=arguments.length;++c<f;)b=arguments[c],b&&e(b,d,a);return a}function d(a,b){var d=this[b];f(a)&&f(d)?c(d,a):this[b]=a}var e=a("./forOwn"),f=a("../lang/isPlainObject");b.exports=c},{"../lang/isPlainObject":22,"./forOwn":30}],29:[function(a,b){function c(){g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=!0;for(var a in{toString:null})f=!1}function d(a,b,d){var i,j=0;null==f&&c();for(i in a)if(e(b,a,i,d)===!1)break;if(f)for(var k=a.constructor,l=!!k&&a===k.prototype;(i=g[j++])&&("constructor"===i&&(l||!h(a,i))||a[i]===Object.prototype[i]||e(b,a,i,d)!==!1););}function e(a,b,c,d){return a.call(d,b[c],c,b)}var f,g,h=a("./hasOwn");b.exports=d},{"./hasOwn":31}],30:[function(a,b){function c(a,b,c){e(a,function(e,f){return d(a,f)?b.call(c,a[f],f,a):void 0})}var d=a("./hasOwn"),e=a("./forIn");b.exports=c},{"./forIn":29,"./hasOwn":31}],31:[function(a,b){function c(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=c},{}],32:[function(a,b){var c=a("./forOwn"),d=Object.keys||function(a){var b=[];return c(a,function(a,c){b.push(c)}),b};b.exports=d},{"./forOwn":30}],33:[function(a,b){function c(){var a,b,g,h,i=1;for(h=e(arguments[0]);g=arguments[i++];)for(a in g)d(g,a)&&(b=g[a],h[a]=f(b)&&f(h[a])?c(h[a],b):e(b));return h}var d=a("./hasOwn"),e=a("../lang/deepClone"),f=a("../lang/isObject");b.exports=c},{"../lang/deepClone":15,"../lang/isObject":21,"./hasOwn":31}],34:[function(a,b){function c(a){for(var b,c=0,f=arguments.length;++c<f;)b=arguments[c],null!=b&&e(b,d,a);return a}function d(a,b){this[b]=a}var e=a("./forOwn");b.exports=c},{"./forOwn":30}],35:[function(a,b){function c(a,b){return b?(d(b.split("."),function(b){a[b]||(a[b]={}),a=a[b]}),a):a}var d=a("../array/forEach");b.exports=c},{"../array/forEach":4}],36:[function(a,b){function c(a){for(var b,c="string"!=typeof arguments[1]?arguments[1]:d(arguments,1),e={},f=0;b=c[f++];)e[b]=a[b];return e}var d=a("../array/slice");b.exports=c},{"../array/slice":8}],37:[function(a,b){function c(a,b,c){var e=/^(.+)\.(.+)$/.exec(b);e?d(a,e[1])[e[2]]=c:a[b]=c}var d=a("./namespace");b.exports=c},{"./namespace":35}],38:[function(a,b){function c(a){var b=1===arguments.length&&e(a)?a:arguments;return b[d(0,b.length-1)]}var d=a("./randInt"),e=a("../lang/isArray");b.exports=c},{"../lang/isArray":16,"./randInt":42}],39:[function(a,b){function c(){return d(8)+"-"+d(4)+"-4"+d(3)+"-"+e(8,9,"a","b")+d(3)+"-"+d(12)}var d=a("./randHex"),e=a("./choice");b.exports=c},{"./choice":38,"./randHex":41}],40:[function(a,b){function c(a,b){return a=null==a?e:a,b=null==b?f:b,a+(b-a)*d()}var d=a("./random"),e=a("../number/MIN_INT"),f=a("../number/MAX_INT");b.exports=c},{"../number/MAX_INT":25,"../number/MIN_INT":26,"./random":43}],41:[function(a,b){function c(a){a=a&&a>0?a:6;for(var b="";a--;)b+=d(e);return b}var d=a("./choice"),e="0123456789abcdef".split("");b.exports=c},{"./choice":38}],42:[function(a,b){function c(a,b){return a=null==a?d:~~a,b=null==b?e:~~b,Math.round(f(a-.5,b+.499999999999))}var d=a("../number/MIN_INT"),e=a("../number/MAX_INT"),f=a("./rand");b.exports=c},{"../number/MAX_INT":25,"../number/MIN_INT":26,"./rand":40}],43:[function(a,b){function c(){return c.get()}c.get=Math.random,b.exports=c},{}],44:[function(a,b){function c(a){return a=d(a),a=e(a),a=f(a).replace(/[\-_]/g," ").replace(/\s[a-z]/g,g).replace(/\s+/g,"").replace(/^[A-Z]/g,h)}var d=a("../lang/toString"),e=a("./replaceAccents"),f=a("./removeNonWord"),g=a("./upperCase"),h=a("./lowerCase");b.exports=c},{"../lang/toString":24,"./lowerCase":45,"./removeNonWord":48,"./replaceAccents":49,"./upperCase":50}],45:[function(a,b){function c(a){return a=d(a),a.toLowerCase()}var d=a("../lang/toString");b.exports=c},{"../lang/toString":24}],46:[function(a,b){function c(){var a=d(e(arguments),"/");return a.replace(/([^:\/]|^)\/{2,}/g,"$1/")}var d=a("../array/join"),e=a("../array/slice");b.exports=c},{"../array/join":6,"../array/slice":8}],47:[function(a,b){function c(a){return a=d(a),e(a).replace(/^[a-z]/,f)}var d=a("../lang/toString"),e=a("./camelCase"),f=a("./upperCase");b.exports=c},{"../lang/toString":24,"./camelCase":44,"./upperCase":50}],48:[function(a,b){function c(a){return a=d(a),a.replace(e,"")}var d=a("../lang/toString"),e=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;b.exports=c},{"../lang/toString":24}],49:[function(a,b){function c(a){return a=d(a),a.search(/[\xC0-\xFF]/g)>-1&&(a=a.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),a}var d=a("../lang/toString");b.exports=c},{"../lang/toString":24}],50:[function(a,b){function c(a){return a=d(a),a.toUpperCase()}var d=a("../lang/toString");b.exports=c},{"../lang/toString":24}],51:[function(a,b){function c(){var a=this.defaults={queryTransform:function(a,b){return b},forceTrailingSlash:!1,$httpConfig:{}};this.$get=["$http","$log","DSUtils",function(b,c,d){function e(a,b,c,e){e=e||{};var f=[e.baseUrl||b.baseUrl,b.getEndpoint(d.isString(c)||d.isNumber(c)||"create"===a?c:null,e)];return("find"===a||"update"===a||"destroy"===a)&&f.push(c),d.makePath.apply(d,f)}return{defaults:a,getPath:e,HTTP:function(e){var f=(new Date).getTime();return this.defaults.forceTrailingSlash&&"/"!==e.url[e.url.length]&&(e.url+="/"),e=d.deepMixIn(e,a.$httpConfig),b(e).then(function(a){return c.debug(a.config.method+" request:"+a.config.url+" Time taken: "+((new Date).getTime()-f)+"ms",arguments),a})},GET:function(a,b){return b=b||{},"method"in b||(b.method="GET"),this.HTTP(d.deepMixIn(b,{url:a}))},POST:function(a,b,c){return c=c||{},"method"in c||(c.method="POST"),this.HTTP(d.deepMixIn(c,{url:a,data:b}))},PUT:function(a,b,c){return c=c||{},"method"in c||(c.method="PUT"),this.HTTP(d.deepMixIn(c,{url:a,data:b||{}}))},DEL:function(a,b){return b=b||{},"method"in b||(b.method="DELETE"),this.HTTP(d.deepMixIn(b,{url:a}))},find:function(a,b,c){return c=c||{},this.GET(e("find",a,b,c),c)},findAll:function(b,c,f){return f=f||{},f.params=f.params||{},c&&(c=a.queryTransform(b.name,c),d.deepMixIn(f.params,c)),this.GET(e("findAll",b,c,f),f)},create:function(a,b,c){return c=c||{},this.POST(e("create",a,b,c),b,c)},update:function(a,b,c,d){return d=d||{},this.PUT(e("update",a,b,d),c,d)},updateAll:function(b,c,f,g){return g=g||{},g.params=g.params||{},f&&(f=a.queryTransform(b.name,f),d.deepMixIn(g.params,f)),this.PUT(e("updateAll",b,c,g),c,g)},destroy:function(a,b,c){return c=c||{},this.DEL(e("destroy",a,b,c),c)},destroyAll:function(b,c,f){return f=f||{},f.params=f.params||{},c&&(c=a.queryTransform(b.name,c),d.deepMixIn(f.params,c)),this.DEL(e("destroyAll",b,c,f),f)}}}]}b.exports=c},{}],52:[function(a,b){function c(){this.$get=["$q","DSUtils","DSErrors",function(a,b){function c(a,c,d,e){e=e||{};var f=[e.baseUrl||c.baseUrl,c.getEndpoint(b.isString(d)||b.isNumber(d)||"create"===a?d:null,e)];return("find"===a||"update"===a||"destroy"===a)&&f.push(d),b.makePath.apply(b,f)}return{getIds:function(a,c){var d,e=b.makePath(c.baseUrl,"DSKeys",a),f=localStorage.getItem(e);return f?d=b.fromJson(f):(localStorage.setItem(e,b.toJson({})),d={}),d},saveKeys:function(a,c,d){var e=b.makePath(d.baseUrl,"DSKeys",c);localStorage.setItem(e,b.toJson(a))},ensureId:function(a,b,c){var d=this.getIds(b,c);d[a]=1,this.saveKeys(d,b,c)},removeId:function(a,b,c){var d=this.getIds(b,c);delete d[a],this.saveKeys(d,b,c)},GET:function(b){var c=a.defer();try{var d=localStorage.getItem(b);c.resolve(d?angular.fromJson(d):void 0)}catch(e){c.reject(e)}return c.promise},PUT:function(a,c){var d=this;return d.GET(a).then(function(e){return e&&b.deepMixIn(e,c),localStorage.setItem(a,JSON.stringify(e||c)),d.GET(a)})},DEL:function(b){var c=a.defer();try{localStorage.removeItem(b),c.resolve()}catch(d){c.reject(d)}return c.promise},find:function(b,d,e){return e=e||{},this.GET(c("find",b,d,e)).then(function(b){return b?b:a.reject(new Error("Not Found!"))})},findAll:function(d,e,f){var g=this,h=a.defer();f=f||{},"allowSimpleWhere"in f||(f.allowSimpleWhere=!0);var i=[],j=b.keys(g.getIds(d.name,f));return b.forEach(j,function(a){var e=localStorage.getItem(c("find",d,a,f));e&&i.push(b.fromJson(e))}),h.resolve(g.DS.defaults.defaultFilter.call(g.DS,i,d.name,e,f)),h.promise},create:function(a,d,e){var f=this,g=d[a.idAttribute];return e=e||{},f.GET(c("find",a,g,e)).then(function(h){return h?b.deepMixIn(h,d):d[a.idAttribute]=g=g||b.guid(),f.PUT(c("update",a,g,e),h||d)}).then(function(b){return f.ensureId(b[a.idAttribute],a.name,e),b})},update:function(a,d,e,f){f=f||{};var g=this;return g.GET(c("find",a,d,f)).then(function(h){return h=h||{},b.deepMixIn(h,e),g.PUT(c("update",a,d,f),h)}).then(function(b){return g.ensureId(b[a.idAttribute],a.name,f),b})},updateAll:function(c,d,e,f){var g=this;return this.findAll(c,e,f).then(function(e){var h=[];return b.forEach(e,function(a){h.push(g.update(c,a[c.idAttribute],d,f))}),a.all(h)})},destroy:function(a,b,d){return d=d||{},this.DEL(c("destroy",a,b,d))},destroyAll:function(c,d,e){var f=this;return this.findAll(c,d,e).then(function(d){var g=[];return b.forEach(d,function(a){g.push(f.destroy(c,a[c.idAttribute],e))}),a.all(g)})}}}]}b.exports=c},{}],53:[function(a,b){function c(a){return"DS.create("+a+", attrs[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.$q.defer();try{var h,i=e.definitions[a];if(d=d||{},!i)throw new e.errors.NER(c(a)+a);if(!f.isObject(b))throw new e.errors.IA(c(a)+"attrs: Must be an object!");return d=f._(i,d),g.resolve(b),d.upsert&&b[i.idAttribute]?e.update(a,b[i.idAttribute],b,d):g.promise.then(function(b){return d.beforeValidate.call(b,a,b)}).then(function(b){return d.validate.call(b,a,b)}).then(function(b){return d.afterValidate.call(b,a,b)}).then(function(b){return d.beforeCreate.call(b,a,b)}).then(function(b){return d.notify&&e.emit(i,"beforeCreate",f.merge({},b)),d.eagerInject&&d.cacheResponse&&(b[i.idAttribute]=b[i.idAttribute]||f.guid(),h=e.inject(a,b)),e.adapters[d.adapter||i.defaultAdapter].create(i,d.serialize?d.serialize(a,b):i.serialize(a,b),d)}).then(function(b){var c=d.deserialize?d.deserialize(a,b):i.deserialize(a,b);return d.afterCreate.call(c,a,c)}).then(function(b){if(d.notify&&e.emit(i,"afterCreate",f.merge({},b)),d.cacheResponse){var c=e.store[a];if(d.eagerInject){var g=b[i.idAttribute],j=h[i.idAttribute],k=e.get(a,j);c.previousAttributes[g]=c.previousAttributes[j],c.changeHistories[g]=c.changeHistories[j],c.observers[g]=c.observers[j],c.modified[g]=c.modified[j],c.saved[g]=c.saved[j],c.index.put(g,k),e.eject(a,j,{notify:!1}),k[i.idAttribute]=g,c.collection.push(k)}var l=e.inject(a,b,d),m=l[i.idAttribute];return c.completedQueries[m]=(new Date).getTime(),c.previousAttributes[m]=f.copy(l),c.saved[m]=f.updateTimestamp(c.saved[m]),e.get(a,m)}return e.createInstance(a,b,d)})["catch"](function(b){return d.eagerInject&&d.cacheResponse&&e.eject(a,h[i.idAttribute],{notify:!1}),e.$q.reject(b)})}catch(j){return g.reject(j),g.promise}}b.exports=d},{}],54:[function(a,b){function c(a,b){return"DS.destroy("+a+", "+b+"[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.$q.defer();try{var h=e.definitions[a];if(d=d||{},b=f.resolveId(h,b),!h)throw new e.errors.NER(c(a,b)+a);if(!f.isString(b)&&!f.isNumber(b))throw new e.errors.IA(c(a,b)+"id: Must be a string or a number!");var i=e.get(a,b);if(!i)throw new e.errors.R(c(a,b)+'id: "'+b+'" not found!');return d=f._(h,d),g.resolve(i),g.promise.then(function(b){return d.beforeDestroy.call(b,a,b)}).then(function(c){return d.notify&&e.emit(h,"beforeDestroy",f.merge({},c)),d.eagerEject&&e.eject(a,b),e.adapters[d.adapter||h.defaultAdapter].destroy(h,b,d)}).then(function(){return d.afterDestroy.call(i,a,i)}).then(function(){return d.notify&&e.emit(h,"afterDestroy",f.merge({},i)),e.eject(a,b),b})["catch"](function(b){return d.eagerEject&&i&&e.inject(a,i),e.$q.reject(b)})}catch(j){return g.reject(j),g.promise}}b.exports=d},{}],55:[function(a,b){function c(a){return"DS.destroyAll("+a+", params[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.$q.defer();try{var h=e.errors.IA,i=e.definitions[a];if(d=d||{},!i)throw new e.errors.NER(c(a)+a);if(!f.isObject(b))throw new h(c(a)+"params: Must be an object!");if(!f.isObject(d))throw new h(c(a)+"options: Must be an object!");return d=f._(i,d),g.resolve(),g.promise.then(function(){return e.adapters[d.adapter||i.defaultAdapter].destroyAll(i,b,d)}).then(function(){return e.ejectAll(a,b)})}catch(j){return g.reject(j),g.promise}}b.exports=d},{}],56:[function(a,b){function c(a,b){return"DS.find("+a+", "+b+"[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.$q.defer(),h=g.promise;try{var i=e.errors.IA,j=e.definitions[a];if(d=d||{},!j)throw new e.errors.NER(c(a,b)+a);if(!f.isString(b)&&!f.isNumber(b))throw new i(c(a,b)+"id: Must be a string or a number!");if(!f.isObject(d))throw new i(c(a,b)+"options: Must be an object!");d=f._(j,d);var k=e.store[a];if((d.bypassCache||!d.cacheResponse)&&delete k.completedQueries[b],!(b in k.completedQueries))return b in k.pendingQueries||(h=k.pendingQueries[b]=e.adapters[d.adapter||j.defaultAdapter].find(j,b,d).then(function(c){var f=d.deserialize?d.deserialize(a,c):j.deserialize(a,c);return delete k.pendingQueries[b],d.cacheResponse?(k.completedQueries[b]=(new Date).getTime(),e.inject(a,f,d)):e.createInstance(a,f,d)},function(a){return delete k.pendingQueries[b],e.$q.reject(a)})),k.pendingQueries[b];g.resolve(e.get(a,b))}catch(l){g.reject(l)}return h}b.exports=d},{}],57:[function(a,b){function c(a){return"DS.findAll("+a+", params[, options]): "}function d(a,b,d,e){var f=this,g=f.utils,h=f.store[b],i=f.definitions[b].idAttribute,j=(new Date).getTime();a=a||[],delete h.pendingQueries[d],h.completedQueries[d]=j,h.collectionModified=g.updateTimestamp(h.collectionModified);var k=f.inject(b,a,e);return g.isArray(k)?angular.forEach(k,function(a){a&&a[i]&&(h.completedQueries[a[i]]=j)}):(f.$log.warn(c(b)+"response is expected to be an array!"),h.completedQueries[k[i]]=j),k}function e(a,b,c){var e=this,f=e.utils,g=e.definitions[a],h=e.store[a],i=f.toJson(b);return(c.bypassCache||!c.cacheResponse)&&delete h.completedQueries[i],i in h.completedQueries?e.filter(a,b,c):(i in h.pendingQueries||(h.pendingQueries[i]=e.adapters[c.adapter||g.defaultAdapter].findAll(g,b,c).then(function(b){delete h.pendingQueries[i];var j=c.deserialize?c.deserialize(a,b):g.deserialize(a,b);if(!c.cacheResponse)return f.forEach(j,function(b,d){j[d]=e.createInstance(a,b,c)}),j;try{return d.call(e,j,a,i,c)}catch(k){return e.$q.reject(k)}},function(a){return delete h.pendingQueries[i],e.$q.reject(a)})),h.pendingQueries[i])}function f(a,b,d){var f=this,g=f.utils,h=f.$q.defer(),i=f.definitions[a];try{var j=f.errors.IA;if(d=d||{},b=b||{},!i)throw new f.errors.NER(c(a)+a);if(!g.isObject(b))throw new j(c(a)+"params: Must be an object!");if(!g.isObject(d))throw new j(c(a)+"options: Must be an object!");return d=g._(i,d),h.resolve(),h.promise.then(function(){return e.call(f,a,b,d)})}catch(k){return h.reject(k),h.promise}}b.exports=f},{}],58:[function(a,b){b.exports={create:a("./create"),destroy:a("./destroy"),destroyAll:a("./destroyAll"),find:a("./find"),findAll:a("./findAll"),loadRelations:a("./loadRelations"),refresh:a("./refresh"),save:a("./save"),update:a("./update"),updateAll:a("./updateAll")}},{"./create":53,"./destroy":54,"./destroyAll":55,"./find":56,"./findAll":57,"./loadRelations":59,"./refresh":60,"./save":61,"./update":62,"./updateAll":63}],59:[function(a,b){function c(a){return"DS.loadRelations("+a+", instance(Id), relations[, options]): "}function d(a,b,d,e){var f=this,g=f.utils,h=f.$q.defer();try{var i=f.errors.IA,j=f.definitions[a];if(e=e||{},(g.isString(b)||g.isNumber(b))&&(b=f.get(a,b)),angular.isString(d)&&(d=[d]),!j)throw new f.errors.NER(c(a)+a);if(!g.isObject(b))throw new i(c(a)+"instance(Id): Must be a string, number or object!");if(!g.isArray(d))throw new i(c(a)+"relations: Must be a string or an array!");if(!g.isObject(e))throw new i(c(a)+"options: Must be an object!");e=g._(j,e),e.hasOwnProperty("findBelongsTo")||(e.findBelongsTo=!0),e.hasOwnProperty("findHasMany")||(e.findHasMany=!0);var k=[],l=[];return g.forEach(j.relationList,function(a){var c=a.relation;if(g.contains(d,c)){var h,i={};e.allowSimpleWhere?i[a.foreignKey]=b[j.idAttribute]:(i.where={},i.where[a.foreignKey]={"==":b[j.idAttribute]}),"hasMany"===a.type&&i[a.foreignKey]?h=f.findAll(c,i,e):"hasOne"===a.type?a.localKey&&b[a.localKey]?h=f.find(c,b[a.localKey],e):a.foreignKey&&i[a.foreignKey]&&(h=f.findAll(c,i,e).then(function(a){return a.length?a[0]:null})):b[a.localKey]&&(h=f.find(c,b[a.localKey],e)),h&&(k.push(h),l.push(a.localField))}}),h.resolve(),h.promise.then(function(){return f.$q.all(k)}).then(function(a){return angular.forEach(l,function(c,d){b[c]=a[d]}),b})}catch(m){return h.reject(m),h.promise}}b.exports=d},{}],60:[function(a,b){function c(a,b){return"DS.refresh("+a+", "+b+"[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.errors.IA,h=e.definitions[a];if(d=d||{},b=f.resolveId(e.definitions[a],b),h){if(f.isString(b)||f.isNumber(b)){if(f.isObject(d)){if(d=f._(h,d),d.bypassCache=!0,e.get(a,b))return e.find(a,b,d);var i=e.$q.defer();return i.resolve(),i.promise}throw new g(c(a,b)+"options: Must be an object!")}throw new g(c(a,b)+"id: Must be a string or a number!")}throw new e.errors.NER(c(a,b)+a)}b.exports=d},{}],61:[function(a,b){function c(a,b){return"DS.save("+a+", "+b+"[, options]): "}function d(a,b,d){var e=this,f=e.utils,g=e.$q.defer();try{var h=e.errors.IA,i=e.definitions[a];if(d=d||{},b=f.resolveId(i,b),!i)throw new e.errors.NER(c(a,b)+a);if(!f.isString(b)&&!f.isNumber(b))throw new h(c(a,b)+"id: Must be a string or a number!");if(!f.isObject(d))throw new h(c(a,b)+"options: Must be an object!");var j=e.get(a,b);if(!j)throw new e.errors.R(c(a,b)+'id: "'+b+'" not found!');return d=f._(i,d),g.resolve(j),g.promise.then(function(b){return d.beforeValidate.call(b,a,b)}).then(function(b){return d.validate.call(b,a,b)}).then(function(b){return d.afterValidate.call(b,a,b)}).then(function(b){return d.beforeUpdate.call(b,a,b)}).then(function(c){if(d.notify&&e.emit(i,"beforeUpdate",f.merge({},c)),d.changesOnly){var g=e.store[a];g.observers[b].deliver();var h=[],j=e.changes(a,b);for(var k in j.added)h.push(k);for(k in j.changed)h.push(k);if(j=f.pick(c,h),f.isEmpty(j))return c;c=j}return e.adapters[d.adapter||i.defaultAdapter].update(i,b,d.serialize?d.serialize(a,c):i.serialize(a,c),d)}).then(function(b){var c=d.deserialize?d.deserialize(a,b):i.deserialize(a,b);return d.afterUpdate.call(c,a,c)}).then(function(c){if(d.notify&&e.emit(i,"afterUpdate",f.merge({},c)),d.cacheResponse){var g=e.store[a],h=e.inject(i.name,c,d);return g.previousAttributes[b]=f.copy(h),g.saved[b]=f.updateTimestamp(g.saved[b]),g.observers[b].discardChanges(),e.get(a,b)}return c})}catch(k){return g.reject(k),g.promise}}b.exports=d},{}],62:[function(a,b){function c(a,b){return"DS.update("+a+", "+b+", attrs[, options]): "}function d(a,b,d,e){var f=this,g=f.utils,h=f.$q.defer();try{var i=f.errors.IA,j=f.definitions[a];if(e=e||{},b=g.resolveId(j,b),!j)throw new f.errors.NER(c(a,b)+a);if(!g.isString(b)&&!g.isNumber(b))throw new i(c(a,b)+"id: Must be a string or a number!");if(!g.isObject(d))throw new i(c(a,b)+"attrs: Must be an object!");
if(!g.isObject(e))throw new i(c(a,b)+"options: Must be an object!");return e=g._(j,e),h.resolve(d),h.promise.then(function(b){return e.beforeValidate.call(b,a,b)}).then(function(b){return e.validate.call(b,a,b)}).then(function(b){return e.afterValidate.call(b,a,b)}).then(function(b){return e.beforeUpdate.call(b,a,b)}).then(function(c){return e.notify&&f.emit(j,"beforeUpdate",g.merge({},c)),f.adapters[e.adapter||j.defaultAdapter].update(j,b,e.serialize?e.serialize(a,c):j.serialize(a,c),e)}).then(function(b){var c=e.deserialize?e.deserialize(a,b):j.deserialize(a,b);return e.afterUpdate.call(c,a,c)}).then(function(b){if(e.notify&&f.emit(j,"afterUpdate",g.merge({},b)),e.cacheResponse){var c=f.store[a],d=f.inject(j.name,b,e),h=d[j.idAttribute];return c.previousAttributes[h]=g.copy(d),c.saved[h]=g.updateTimestamp(c.saved[h]),c.observers[h].discardChanges(),f.get(j.name,h)}return b})}catch(k){return h.reject(k),h.promise}}b.exports=d},{}],63:[function(a,b){function c(a){return"DS.updateAll("+a+", attrs, params[, options]): "}function d(a,b,d,e){var f=this,g=f.utils,h=f.$q.defer();try{var i=f.errors.IA,j=f.definitions[a];if(e=e||{},!j)throw new f.errors.NER(c(a)+a);if(!g.isObject(b))throw new i(c(a)+"attrs: Must be an object!");if(!g.isObject(d))throw new i(c(a)+"params: Must be an object!");if(!g.isObject(e))throw new i(c(a)+"options: Must be an object!");return e=g._(j,e),h.resolve(b),h.promise.then(function(b){return e.beforeValidate.call(b,a,b)}).then(function(b){return e.validate.call(b,a,b)}).then(function(b){return e.afterValidate.call(b,a,b)}).then(function(b){return e.beforeUpdate.call(b,a,b)}).then(function(b){return e.notify&&f.emit(j,"beforeUpdate",g.merge({},b)),f.adapters[e.adapter||j.defaultAdapter].updateAll(j,e.serialize?e.serialize(a,b):j.serialize(a,b),d,e)}).then(function(b){var c=e.deserialize?e.deserialize(a,b):j.deserialize(a,b);return e.afterUpdate.call(c,a,c)}).then(function(a){return e.notify&&f.emit(j,"afterUpdate",g.merge({},a)),e.cacheResponse?f.inject(j.name,a,e):a})}catch(k){return h.reject(k),h.promise}}b.exports=d},{}],64:[function(a,b){function c(a,b,c){c(null,b)}function d(a,b,c,e,f){var g=b[c],h=e[g[0]],i=f[g[0]];return a.isString(h)&&(h=a.upperCase(h)),a.isString(i)&&(i=a.upperCase(i)),"DESC"===g[1]?h>i?-1:i>h?1:c<b.length-1?d(a,b,c+1,e,f):0:i>h?-1:h>i?1:c<b.length-1?d(a,b,c+1,e,f):0}function e(){}function f(){var b=this.defaults=new e;this.$get=["$rootScope","$log","$q","DSHttpAdapter","DSLocalStorageAdapter","DSUtils","DSErrors",function(c,d,e,f,g,h,i){var j,k=a("./sync_methods"),l=a("./async_methods");try{j=angular.injector(["angular-data.DSCacheFactory"]).get("DSCacheFactory")}catch(m){d.debug("DSCacheFactory is unavailable. Resorting to the lesser capabilities of $cacheFactory."),j=angular.injector(["ng"]).get("$cacheFactory")}var n={emit:function(a,b){var d=Array.prototype.slice.call(arguments,2);d.unshift(a.name),d.unshift("DS."+b),a.emit.apply(a,d),"broadcast"===a.events?c.$broadcast.apply(c,d):"emit"===a.events&&c.$emit.apply(c,d)},$rootScope:c,$log:d,$q:e,cacheFactory:j,defaults:b,store:{},definitions:{},adapters:{DSHttpAdapter:f,DSLocalStorageAdapter:g},errors:i,utils:h};return h.deepFreeze(k),h.deepFreeze(l),h.deepMixIn(n,k),h.deepMixIn(n,l),h.deepFreeze(n.errors),h.deepFreeze(n.utils),f.DS=n,g.DS=n,("function"!=typeof Object.observe||"function"!=typeof Array.observe)&&c.$watch(function(){h.observe.Platform.performMicrotaskCheckpoint()}),n}]}e.prototype.idAttribute="id",e.prototype.defaultAdapter="DSHttpAdapter",e.prototype.defaultFilter=function(a,b,c,e){var f=this,g=f.utils,h=a,i=null,j={skip:"",offset:"",where:"",limit:"",orderBy:"",sort:""};c=c||{},i=g.isObject(c.where)?c.where:{},e.allowSimpleWhere&&g.forEach(c,function(a,b){b in j||b in i||(i[b]={"==":a})}),g.isEmpty(i)&&(i=null),i&&(h=g.filter(h,function(a){var b=!0,c=!0;return g.forEach(i,function(d,e){g.isString(d)?d={"===":d}:(g.isNumber(d)||g.isBoolean(d))&&(d={"==":d}),g.isObject(d)&&g.forEach(d,function(d,f){var h,i="|"===f[0],j=a[e];f=i?f.substr(1):f,"=="===f?h=j==d:"==="===f?h=j===d:"!="===f?h=j!=d:"!=="===f?h=j!==d:">"===f?h=j>d:">="===f?h=j>=d:"<"===f?h=d>j:"<="===f?h=d>=j:"in"===f?h=g.isString(d)?-1!==d.indexOf(j):g.contains(d,j):"notIn"===f?h=g.isString(d)?-1===d.indexOf(j):!g.contains(d,j):"contains"===f?h=g.isString(d)?-1!==(j||"").indexOf(d):g.contains(j,d):"notContains"===f&&(h=g.isString(d)?-1===(j||"").indexOf(d):!g.contains(j,d)),void 0!==h&&(c=b?h:i?c||h:c&&h),b=!1})}),c}));var k=null;if(g.isString(c.orderBy)?k=[[c.orderBy,"ASC"]]:g.isArray(c.orderBy)&&(k=c.orderBy),!k&&g.isString(c.sort)?k=[[c.sort,"ASC"]]:!k&&g.isArray(c.sort)&&(k=c.sort),k){var l=0;angular.forEach(k,function(a,b){if(g.isString(a))k[b]=[a,"ASC"];else if(!g.isArray(a))throw new f.errors.IllegalArgumentError("DS.filter(resourceName[, params][, options]): "+JSON.stringify(a)+": Must be a string or an array!",{params:{"orderBy[i]":{actual:typeof a,expected:"string|array"}}});h=g.sort(h,function(a,b){return d(g,k,l,a,b)})})}var m=angular.isNumber(c.limit)?c.limit:null,n=null;return angular.isNumber(c.skip)?n=c.skip:angular.isNumber(c.offset)&&(n=c.offset),m&&n?h=f.utils.slice(h,n,Math.min(h.length,n+m)):f.utils.isNumber(m)?h=f.utils.slice(h,0,Math.min(h.length,m)):f.utils.isNumber(n)&&(h=n<h.length?f.utils.slice(h,n):[]),h},e.prototype.baseUrl="",e.prototype.endpoint="",e.prototype.useClass=!0,e.prototype.keepChangeHistory=!1,e.prototype.resetHistoryOnInject=!0,e.prototype.eagerInject=!1,e.prototype.eagerEject=!1,e.prototype.notify=!0,e.prototype.cacheResponse=!0,e.prototype.upsert=!0,e.prototype.allowSimpleWhere=!0,e.prototype.ignoredChanges=[/\$/],e.prototype.beforeValidate=c,e.prototype.validate=c,e.prototype.afterValidate=c,e.prototype.beforeCreate=c,e.prototype.afterCreate=c,e.prototype.beforeUpdate=c,e.prototype.afterUpdate=c,e.prototype.beforeDestroy=c,e.prototype.afterDestroy=c,e.prototype.beforeInject=function(a,b){return b},e.prototype.afterInject=function(a,b){return b},e.prototype.serialize=function(a,b){return b},e.prototype.deserialize=function(a,b){return b&&b.data?b.data:b},e.prototype.events="broadcast",b.exports=f},{"./async_methods":58,"./sync_methods":79}],65:[function(a,b){function c(a){return"DS.bindAll(scope, expr, "+a+", params[, cb]): "}function d(a,b,d,e,f){var g=this,h=g.errors.IA;if(e=e||{},!g.utils.isObject(a))throw new h(c(d)+"scope: Must be an object!");if(!g.utils.isString(b))throw new h(c(d)+"expr: Must be a string!");if(!g.definitions[d])throw new g.errors.NER(c(d)+d);if(!g.utils.isObject(e))throw new h(c(d)+"params: Must be an object!");try{return a.$watch(function(){return g.lastModified(d)},function(){var c=g.filter(d,e);g.utils.set(a,b,c),f&&f(null,c)})}catch(i){if(!f)throw i;f(i)}}b.exports=d},{}],66:[function(a,b){function c(a){return"DS.bindOne(scope, expr, "+a+", id[, cb]): "}function d(a,b,d,e,f){var g=this,h=g.errors.IA;if(e=g.utils.resolveId(g.definitions[d],e),!g.utils.isObject(a))throw new h(c(d)+"scope: Must be an object!");if(!g.utils.isString(b))throw new h(c(d)+"expr: Must be a string!");if(!g.definitions[d])throw new g.errors.NER(c(d)+d);if(!g.utils.isString(e)&&!g.utils.isNumber(e))throw new h(c(d)+"id: Must be a string or a number!");try{return a.$watch(function(){return g.lastModified(d,e)},function(){var c=g.get(d,e);g.utils.set(a,b,c),f&&f(null,c)})}catch(i){if(!f)throw i;f(i)}}b.exports=d},{}],67:[function(a,b){function c(a){return"DS.changeHistory("+a+", id): "}function d(a,b){var d=this,e=d.utils,f=d.definitions[a],g=d.store[a];if(b=d.utils.resolveId(f,b),a&&!d.definitions[a])throw new d.errors.NER(c(a)+a);if(b&&!e.isString(b)&&!e.isNumber(b))throw new d.errors.IA(c(a)+"id: Must be a string or a number!");if(f.keepChangeHistory){if(!a)return g.changeHistory;var h=d.get(a,b);if(h)return g.changeHistories[b]}else d.$log.warn(c(a)+"changeHistory is disabled for this resource!")}b.exports=d},{}],68:[function(a,b){function c(a){return"DS.changes("+a+", id): "}function d(a,b,d){var e=this,f=e.utils,g=e.definitions[a];if(d=d||{},b=f.resolveId(e.definitions[a],b),!g)throw new e.errors.NER(c(a)+a);if(!f.isString(b)&&!f.isNumber(b))throw new e.errors.IA(c(a)+"id: Must be a string or a number!");if(!f.isObject(d))throw new e.errors.IA(c(a)+"options: Must be an object!");d=f._(g,d);var h=e.get(a,b);if(h){e.store[a].observers[b].deliver();var i=f.diffObjectFromOldObject(h,e.store[a].previousAttributes[b],f.deepEquals,d.ignoredChanges);return f.forEach(i,function(a,b){var c=[];f.forEach(a,function(a,b){angular.isFunction(a)||c.push(b)}),i[b]=f.pick(i[b],c)}),f.forEach(e.definitions[a].relationFields,function(a){delete i.added[a],delete i.removed[a],delete i.changed[a]}),i}}b.exports=d},{}],69:[function(a,b){function c(a){return"DS.compute("+a+", instance): "}function d(a,b){var c=this,d=[];angular.forEach(a.deps,function(a){d.push(c[a])}),this[b]=a[a.length-1].apply(this,d)}function e(a,b){var e=this,f=e.errors.IA,g=e.definitions[a];if(b=e.utils.resolveItem(e.store[a],b),!g)throw new e.errors.NER(c(a)+a);if(!e.utils.isObject(b)&&!e.utils.isString(b)&&!e.utils.isNumber(b))throw new f(c(a)+"instance: Must be an object, string or number!");return(e.utils.isString(b)||e.utils.isNumber(b))&&(b=e.get(a,b)),e.utils.forEach(g.computed,function(a,c){d.call(b,a,c)}),b}b.exports={compute:e,_compute:d}},{}],70:[function(a,b){function c(a){return"DS.createInstance("+a+"[, attrs][, options]): "}function d(a,b,d){var e=this,f=e.errors.IA,g=e.definitions[a];if(b=b||{},d=d||{},!g)throw new e.errors.NER(c(a)+a);if(b&&!e.utils.isObject(b))throw new f(c(a)+"attrs: Must be an object!");if(!e.utils.isObject(d))throw new f(c(a)+"options: Must be an object!");"useClass"in d||(d.useClass=g.useClass);var h;if(d.useClass){var i=g[g["class"]];h=new i}else h={};return e.utils.deepMixIn(h,b)}b.exports=d},{}],71:[function(require,module,exports){function Resource(a,b){a.deepMixIn(this,b),this.endpoint="endpoint"in b?b.endpoint:this.name}function defineResource(definition){var DS=this,DSUtils=DS.utils,definitions=DS.definitions,IA=DS.errors.IA;DSUtils.isString(definition)&&(definition=definition.replace(/\s/gi,""),definition={name:definition});var defName=definition?definition.name:void 0;if(!DSUtils.isObject(definition))throw new IA(errorPrefix+"definition: Must be an object!");if(!DSUtils.isString(defName))throw new IA(errorPrefix+"definition.name: Must be a string!");if(definition.idAttribute&&!DSUtils.isString(definition.idAttribute))throw new IA(errorPrefix+"definition.idAttribute: Must be a string!");if(definition.endpoint&&!DSUtils.isString(definition.endpoint))throw new IA(errorPrefix+"definition.endpoint: Must be a string!");if(DS.store[defName])throw new DS.errors.R(errorPrefix+defName+" is already registered!");try{Resource.prototype=DS.defaults,definitions[defName]=new Resource(DSUtils,definition);var def=definitions[defName];def.relations&&(def.relationList=[],def.relationFields=[],DSUtils.forEach(def.relations,function(a,b){DSUtils.forEach(a,function(c,d){DSUtils.isArray(c)||(a[d]=[c]),DSUtils.forEach(a[d],function(a){a.type=b,a.relation=d,a.name=def.name,def.relationList.push(a),def.relationFields.push(a.localField)})})}),def.relations.belongsTo&&DSUtils.forEach(def.relations.belongsTo,function(a,b){DSUtils.forEach(a,function(a){a.parent&&(def.parent=b,def.parentKey=a.localKey)})}),DSUtils.deepFreeze(def.relations),DSUtils.deepFreeze(def.relationList)),def.getEndpoint=function(a,b){b=DSUtils.deepMixIn({},b);var c,d,e=this.parent,f=this.parentKey,g=b.endpoint||this.endpoint;return delete b.endpoint,b=b||{},b.params=b.params||{},e&&f&&definitions[e]&&b.params[f]!==!1&&((DSUtils.isNumber(a)||DSUtils.isString(a))&&(c=DS.get(this.name,a)),DSUtils.isObject(a)&&f in a?(delete b.params[f],d=DSUtils.makePath(definitions[e].getEndpoint(a,b),a[f],g)):c&&f in c?(delete b.params[f],d=DSUtils.makePath(definitions[e].getEndpoint(a,b),c[f],g)):b&&b.params[f]&&(d=DSUtils.makePath(definitions[e].getEndpoint(a,b),b.params[f],g),delete b.params[f])),b.params[f]===!1&&delete b.params[f],d||g},def.filter&&(def.defaultFilter=def.filter,delete def.filter);var cache=DS.cacheFactory("DS."+def.name,{maxAge:def.maxAge||null,recycleFreq:def.recycleFreq||1e3,cacheFlushInterval:def.cacheFlushInterval||null,deleteOnExpire:def.deleteOnExpire||"none",onExpire:function(a){var b=DS.eject(def.name,a);DSUtils.isFunction(def.onExpire)&&def.onExpire(a,b)},capacity:Number.MAX_VALUE,storageMode:"memory",storageImpl:null,disabled:!1,storagePrefix:"DS."+def.name});def["class"]=DSUtils.pascalCase(defName);try{eval("function "+def["class"]+"() {}"),def[def["class"]]=eval(def["class"])}catch(e){def[def["class"]]=function(){}}return def.methods&&DSUtils.deepMixIn(def[def["class"]].prototype,def.methods),def.computed&&(DSUtils.forEach(def.computed,function(a,b){angular.isFunction(a)&&(def.computed[b]=[a],a=def.computed[b]),def.methods&&b in def.methods&&DS.$log.warn(errorPrefix+'Computed property "'+b+'" conflicts with previously defined prototype method!');var c;if(1===a.length){var d=a[0].toString().match(/function.*?\(([\s\S]*?)\)/);c=d[1].split(","),def.computed[b]=c.concat(a),a=def.computed[b],c.length&&DS.$log.warn(errorPrefix+"Use the computed property array syntax for compatibility with minified code!")}c=a.slice(0,a.length-1),angular.forEach(c,function(a,b){c[b]=a.trim()}),a.deps=DSUtils.filter(c,function(a){return!!a})}),def[def["class"]].prototype.DSCompute=function(){return DS.compute(def.name,this)}),DSUtils.forEach(instanceMethods,function(a){def[def["class"]].prototype["DS"+DSUtils.pascalCase(a)]=function(){var b=Array.prototype.slice.call(arguments);return b.unshift(this[def.idAttribute]),b.unshift(def.name),DS[a].apply(DS,b)}}),DS.store[def.name]={collection:[],completedQueries:{},pendingQueries:{},index:cache,modified:{},saved:{},previousAttributes:{},observers:{},changeHistories:{},changeHistory:[],collectionModified:0},angular.forEach(methodsToProxy,function(a){def[a]="bindOne"===a||"bindAll"===a?function(){var b=Array.prototype.slice.call(arguments);return b.splice(2,0,def.name),DS[a].apply(DS,b)}:function(){var b=Array.prototype.slice.call(arguments);return b.unshift(def.name),DS[a].apply(DS,b)}}),def.beforeValidate=DS.$q.promisify(def.beforeValidate),def.validate=DS.$q.promisify(def.validate),def.afterValidate=DS.$q.promisify(def.afterValidate),def.beforeCreate=DS.$q.promisify(def.beforeCreate),def.afterCreate=DS.$q.promisify(def.afterCreate),def.beforeUpdate=DS.$q.promisify(def.beforeUpdate),def.afterUpdate=DS.$q.promisify(def.afterUpdate),def.beforeDestroy=DS.$q.promisify(def.beforeDestroy),def.afterDestroy=DS.$q.promisify(def.afterDestroy),DSUtils.Events(def),def}catch(err){throw DS.$log.error(err),delete definitions[defName],delete DS.store[defName],err}}var errorPrefix="DS.defineResource(definition): ",instanceMethods=["save","update","destroy","refresh","loadRelations","changeHistory","changes","hasChanges","lastModified","lastSaved","link","linkInverse","previous","unlinkInverse"],methodsToProxy=["bindAll","bindOne","changes","changeHistory","create","createInstance","destroy","destroyAll","digest","eject","ejectAll","filter","find","findAll","get","getAll","hasChanges","inject","lastModified","lastSaved","link","linkAll","linkInverse","loadRelations","previous","refresh","save","update","updateAll"];module.exports=defineResource},{}],72:[function(a,b){function c(){var a=this;a.$rootScope.$$phase?a.utils.observe.Platform.performMicrotaskCheckpoint():a.$rootScope.$apply(function(){a.utils.observe.Platform.performMicrotaskCheckpoint()})}b.exports=c},{}],73:[function(a,b){function c(a,b){return"DS.eject("+a+", "+b+"): "}function d(a,b,c,d){for(var e,f=this,g=!1,h=0;h<b.collection.length;h++)if(b.collection[h][a.idAttribute]==c){e=b.collection[h],g=!0;break}return g?(this.unlinkInverse(a.name,c),b.collection.splice(h,1),b.observers[c].close(),delete b.observers[c],b.index.remove(c),delete b.previousAttributes[c],delete b.completedQueries[c],delete b.pendingQueries[c],f.utils.forEach(b.changeHistories[c],function(a){f.utils.remove(b.changeHistory,a)}),delete b.changeHistories[c],delete b.modified[c],delete b.saved[c],b.collectionModified=this.utils.updateTimestamp(b.collectionModified),d.notify&&this.emit(a,"eject",e),e):void 0}function e(a,b,e){var f=this,g=f.definitions[a];if(e=e||{},b=f.utils.resolveId(g,b),!g)throw new f.errors.NER(c(a,b)+a);if(!f.utils.isString(b)&&!f.utils.isNumber(b))throw new f.errors.IA(c(a,b)+"id: Must be a string or a number!");var h,i=f.store[a];return"notify"in e||(e.notify=g.notify),f.$rootScope.$$phase?h=d.call(f,g,i,b,e):f.$rootScope.$apply(function(){h=d.call(f,g,i,b,e)}),h}b.exports=e},{}],74:[function(a,b){function c(a){return"DS.ejectAll("+a+"[, params]): "}function d(a,b,c,d){var e=this,f=e.utils.toJson(c),g=e.filter(a.name,c),h=e.utils.toLookup(g,a.idAttribute);return angular.forEach(h,function(b,c){e.eject(a.name,c)}),delete b.completedQueries[f],b.collectionModified=e.utils.updateTimestamp(b.collectionModified),d.notify&&e.emit(a,"eject",g),g}function e(a,b,e){var f=this,g=f.definitions[a];if(b=b||{},e=e||{},!g)throw new f.errors.NER(c(a)+a);if(!f.utils.isObject(b))throw new f.errors.IA(c(a)+"params: Must be an object!");var h,i=f.store[a];return f.utils.isEmpty(b)&&(i.completedQueries={}),"notify"in e||(e.notify=g.notify),f.$rootScope.$$phase?h=d.call(f,g,i,b,e):f.$rootScope.$apply(function(){h=d.call(f,g,i,b,e)}),h}b.exports=e},{}],75:[function(a,b){function c(a){return"DS.filter("+a+"[, params][, options]): "}function d(a,b,d){var e=this,f=e.errors.IA,g=e.definitions[a];if(d=d||{},!g)throw new e.errors.NER(c(a)+a);if(b&&!e.utils.isObject(b))throw new f(c(a)+"params: Must be an object!");if(!e.utils.isObject(d))throw new f(c(a)+"options: Must be an object!");var h=e.store[a];b=b||{},d.allowSimpleWhere="allowSimpleWhere"in d?!!d.allowSimpleWhere:!0;var i=e.utils.toJson(b);return i in h.completedQueries||!d.loadFromServer||h.pendingQueries[i]||e.findAll(a,b,d),g.defaultFilter.call(e,h.collection,a,b,d)}b.exports=d},{}],76:[function(a,b){function c(a,b){return"DS.get("+a+", "+b+"): "}function d(a,b,d){var e=this,f=e.errors.IA;if(d=d||{},!e.definitions[a])throw new e.errors.NER(c(a,b)+a);if(!e.utils.isString(b)&&!e.utils.isNumber(b))throw new f(c(a,b)+"id: Must be a string or a number!");if(!e.utils.isObject(d))throw new f(c(a,b)+"options: Must be an object!");var g=e.store[a].index.get(b);return!g&&d.loadFromServer&&e.find(a,b,d).then(null,function(a){return e.$q.reject(a)}),g}b.exports=d},{}],77:[function(a,b){function c(a){return"DS.getAll("+a+"[, ids]): "}function d(a,b){var d=this,e=d.errors.IA,f=d.store[a],g=[];if(!d.definitions[a])throw new d.errors.NER(c(a)+a);if(b&&!d.utils.isArray(b))throw new e(c(a,b)+"ids: Must be an array!");if(d.utils.isArray(b))for(var h=0;h<b.length;h++)f.index.get(b[h])&&g.push(f.index.get(b[h]));else g=f.collection.slice();return g}b.exports=d},{}],78:[function(a,b){function c(a,b){return"DS.hasChanges("+a+", "+b+"): "}function d(a,b){return!(a.isEmpty(b.added)&&a.isEmpty(b.removed)&&a.isEmpty(b.changed))}function e(a,b){var e=this;if(b=e.utils.resolveId(e.definitions[a],b),!e.definitions[a])throw new e.errors.NER(c(a,b)+a);if(!e.utils.isString(b)&&!e.utils.isNumber(b))throw new e.errors.IA(c(a,b)+"id: Must be a string or a number!");return e.get(a,b)?d(e.utils,e.changes(a,b)):!1}b.exports=e},{}],79:[function(a,b){b.exports={bindOne:a("./bindOne"),bindAll:a("./bindAll"),changes:a("./changes"),changeHistory:a("./changeHistory"),compute:a("./compute").compute,createInstance:a("./createInstance"),defineResource:a("./defineResource"),digest:a("./digest"),eject:a("./eject"),ejectAll:a("./ejectAll"),filter:a("./filter"),get:a("./get"),getAll:a("./getAll"),hasChanges:a("./hasChanges"),inject:a("./inject"),lastModified:a("./lastModified"),lastSaved:a("./lastSaved"),link:a("./link"),linkAll:a("./linkAll"),linkInverse:a("./linkInverse"),previous:a("./previous"),unlinkInverse:a("./unlinkInverse")}},{"./bindAll":65,"./bindOne":66,"./changeHistory":67,"./changes":68,"./compute":69,"./createInstance":70,"./defineResource":71,"./digest":72,"./eject":73,"./ejectAll":74,"./filter":75,"./get":76,"./getAll":77,"./hasChanges":78,"./inject":80,"./lastModified":81,"./lastSaved":82,"./link":83,"./linkAll":84,"./linkInverse":85,"./previous":86,"./unlinkInverse":87}],80:[function(a,b){function c(a){return"DS.inject("+a+", attrs[, options]): "}function d(a,b,e,f){function h(c,d,e,f,h){var i,m=this,n=f&&f(a.idAttribute)?f(a.idAttribute):m[a.idAttribute];if(k.forEach(a.relationFields,function(a){delete c[a],delete d[a],delete e[a]}),(!k.isEmpty(c)||!k.isEmpty(d)||!k.isEmpty(e)||h)&&(i=j.get(a.name,n),b.modified[n]=k.updateTimestamp(b.modified[n]),b.collectionModified=k.updateTimestamp(b.collectionModified),a.keepChangeHistory)){var o={resourceName:a.name,target:i,added:c,removed:d,changed:e,timestamp:b.modified[n]};b.changeHistories[n].push(o),b.changeHistory.push(o)}a.computed&&(i=i||j.get(a.name,n),k.forEach(a.computed,function(a,b){var f=!1;angular.forEach(a.deps,function(a){(a in c||a in d||a in e||!(b in i))&&(f=!0)}),f=f||!a.deps.length,f&&g.call(i,a,b)})),a.relations&&(i=i||j.get(a.name,n),k.forEach(a.relationList,function(b){i[b.localField]&&(b.localKey in c||b.localKey in d||b.localKey in e)&&j.link(a.name,i[a.idAttribute],[b.relation])})),a.idAttribute in e&&l.error("Doh! You just changed the primary key of an object! I don't know how to handle this yet, so your data for the \""+a.name+'" resource is now in an undefined (probably broken) state.')}var i,j=this,k=j.utils,l=j.$log;if(k.isArray(e)){i=[];for(var m=0;m<e.length;m++)i.push(d.call(j,a,b,e[m],f))}else{var n=a.computed,o=a.idAttribute;if(n&&n[o]){var p=[];angular.forEach(n[o].deps,function(a){p.push(e[a])}),e[o]=n[o][n[o].length-1].apply(e,p)}if(!(o in e)){var q=new j.errors.R(c(a.name)+"attrs: Must contain the property specified by `idAttribute`!");throw l.error(q),q}try{k.forEach(a.relationList,function(b){var d=b.relation,g=j.definitions[d],h=e[b.localField];if(h){if(!g)throw new j.errors.R(a.name+"relation is defined but the resource is not!");if(k.isArray(h)){var i=[];k.forEach(h,function(h){if(h!==j.store[d][h[g.idAttribute]])try{var k=j.inject(d,h,f);b.foreignKey&&(k[b.foreignKey]=e[a.idAttribute]),i.push(k)}catch(l){j.$log.error(c(a.name)+"Failed to inject "+b.type+' relation: "'+d+'"!',l)}}),e[b.localField]=i}else if(h!==j.store[d][h[g.idAttribute]])try{e[b.localField]=j.inject(d,e[b.localField],f),b.foreignKey&&(e[b.localField][b.foreignKey]=e[a.idAttribute])}catch(l){j.$log.error(c(a.name)+"Failed to inject "+b.type+' relation: "'+d+'"!',l)}}}),a.beforeInject(a.name,e);var r=e[o],s=j.get(a.name,r),t=s?b.modified[r]:0;s?(k.deepMixIn(s,e),a.resetHistoryOnInject&&(b.previousAttributes[r]=k.copy(e),b.changeHistories[r].length&&(k.forEach(b.changeHistories[r],function(a){k.remove(b.changeHistory,a)}),b.changeHistories[r].splice(0,b.changeHistories[r].length))),"function"==typeof b.index.touch?b.index.touch(r):b.index.put(r,b.index.get(r)),b.observers[r].deliver()):(s=f.useClass?e instanceof a[a["class"]]?e:new a[a["class"]]:{},b.previousAttributes[r]=k.copy(e),k.deepMixIn(s,e),b.collection.push(s),b.changeHistories[r]=[],b.observers[r]=new k.observe.ObjectObserver(s),b.observers[r].open(h,s),b.index.put(r,s),h.call(s,{},{},{},null,!0)),b.saved[r]=k.updateTimestamp(b.saved[r]),b.modified[r]=t&&b.modified[r]===t?k.updateTimestamp(b.modified[r]):b.modified[r],a.afterInject(a.name,s),i=s}catch(u){l.error(u),l.error("inject failed!",a.name,e)}}return i}function e(a,b,c){var d=this;d.utils.forEach(a.relationList,function(e){c.findBelongsTo&&"belongsTo"===e.type&&b[a.idAttribute]?d.link(a.name,b[a.idAttribute],[e.relation]):(c.findHasMany&&"hasMany"===e.type||c.findHasOne&&"hasOne"===e.type)&&d.link(a.name,b[a.idAttribute],[e.relation])})}function f(a,b,f){var g=this,h=g.errors.IA,i=g.definitions[a];if(f=f||{},!i)throw new g.errors.NER(c(a)+a);if(!g.utils.isObject(b)&&!g.utils.isArray(b))throw new h(c(a)+"attrs: Must be an object or an array!");if(!g.utils.isObject(f))throw new h(c(a)+"options: Must be an object!");var j,k=g.store[a];return"useClass"in f||(f.useClass=i.useClass),"notify"in f||(f.notify=i.notify),g.$rootScope.$$phase?(j=d.call(g,i,k,b,f),k.collectionModified=g.utils.updateTimestamp(k.collectionModified)):g.$rootScope.$apply(function(){j=d.call(g,i,k,b,f),k.collectionModified=g.utils.updateTimestamp(k.collectionModified)}),f.linkInverse&&"boolean"==typeof f.linkInverse&&(g.utils.isArray(j)?j.length&&g.linkInverse(i.name,j[0][i.idAttribute]):g.linkInverse(i.name,j[i.idAttribute])),g.utils.isArray(j)?g.utils.forEach(j,function(a){e.call(g,i,a,f)}):e.call(g,i,j,f),f.notify&&g.emit(i,"inject",j),j}var g=a("./compute")._compute;b.exports=f},{"./compute":69}],81:[function(a,b){function c(a,b){return"DS.lastModified("+a+"[, "+b+"]): "}function d(a,b){var d=this,e=d.store[a];if(b=d.utils.resolveId(d.definitions[a],b),!d.definitions[a])throw new d.errors.NER(c(a,b)+a);if(b&&!d.utils.isString(b)&&!d.utils.isNumber(b))throw new d.errors.IA(c(a,b)+"id: Must be a string or a number!");return b?(b in e.modified||(e.modified[b]=0),e.modified[b]):e.collectionModified}b.exports=d},{}],82:[function(a,b){function c(a,b){return"DS.lastSaved("+a+"[, "+b+"]): "}function d(a,b){var d=this,e=d.store[a];if(b=d.utils.resolveId(d.definitions[a],b),!d.definitions[a])throw new d.errors.NER(c(a,b)+a);if(!d.utils.isString(b)&&!d.utils.isNumber(b))throw new d.errors.IA(c(a,b)+"id: Must be a string or a number!");return b in e.saved||(e.saved[b]=0),e.saved[b]}b.exports=d},{}],83:[function(a,b){function c(a){return"DS.link("+a+", id[, relations]): "}function d(a,b,c){var d=this;d.utils.forEach(a.relationList,function(e){var f=e.relation;if(!c.length||d.utils.contains(c,f)){var g={};if("belongsTo"===e.type){var h=b[e.localKey]?d.get(f,b[e.localKey]):null;h&&(b[e.localField]=h)}else if("hasMany"===e.type)g[e.foreignKey]=b[a.idAttribute],b[e.localField]=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,g,{allowSimpleWhere:!0});else if("hasOne"===e.type){g[e.foreignKey]=b[a.idAttribute];var i=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,g,{allowSimpleWhere:!0});i.length&&(b[e.localField]=i[0])}}})}function e(a,b,e){var f=this,g=f.errors.IA,h=f.definitions[a];if(e=e||[],b=f.utils.resolveId(h,b),!h)throw new f.errors.NER(c(a)+a);if(!f.utils.isString(b)&&!f.utils.isNumber(b))throw new g(c(a)+"id: Must be a string or a number!");if(!f.utils.isArray(e))throw new g(c(a)+"relations: Must be an array!");var i=f.get(a,b);return i&&(f.$rootScope.$$phase?d.call(f,h,i,e):f.$rootScope.$apply(function(){d.call(f,h,i,e)})),i}b.exports=e},{}],84:[function(a,b){function c(a){return"DS.linkAll("+a+"[, params][, relations]): "}function d(a,b,c){var d=this;d.utils.forEach(a.relationList,function(e){var f=e.relation;(!c.length||d.utils.contains(c,f))&&("belongsTo"===e.type?d.utils.forEach(b,function(a){var b=a[e.localKey]?d.get(f,a[e.localKey]):null;b&&(a[e.localField]=b)}):"hasMany"===e.type?d.utils.forEach(b,function(b){var c={};c[e.foreignKey]=b[a.idAttribute],b[e.localField]=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,c,{allowSimpleWhere:!0})}):"hasOne"===e.type&&d.utils.forEach(b,function(b){var c={};c[e.foreignKey]=b[a.idAttribute];var g=d.defaults.constructor.prototype.defaultFilter.call(d,d.store[f].collection,f,c,{allowSimpleWhere:!0});g.length&&(b[e.localField]=g[0])}))})}function e(a,b,e){var f=this,g=f.errors.IA,h=f.definitions[a];if(e=e||[],!h)throw new f.errors.NER(c(a)+a);if(b&&!f.utils.isObject(b))throw new g(c(a)+"params: Must be an object!");if(!f.utils.isArray(e))throw new g(c(a)+"relations: Must be an array!");var i=f.filter(a,b);return i&&(f.$rootScope.$$phase?d.call(f,h,i,e):f.$rootScope.$apply(function(){d.call(f,h,i,e)})),i}b.exports=e},{}],85:[function(a,b){function c(a){return"DS.linkInverse("+a+", id[, relations]): "}function d(a,b){var c=this;c.utils.forEach(c.definitions,function(d){c.utils.forEach(d.relations,function(e){c.utils.forEach(e,function(e,f){(!b.length||c.utils.contains(b,d.name))&&a.name===f&&c.linkAll(d.name,{},[a.name])})})})}function e(a,b,e){var f=this,g=f.errors.IA,h=f.definitions[a];if(e=e||[],b=f.utils.resolveId(h,b),!h)throw new f.errors.NER(c(a)+a);if(!f.utils.isString(b)&&!f.utils.isNumber(b))throw new g(c(a)+"id: Must be a string or a number!");if(!f.utils.isArray(e))throw new g(c(a)+"relations: Must be an array!");var i=f.get(a,b);return i&&(f.$rootScope.$$phase?d.call(f,h,e):f.$rootScope.$apply(function(){d.call(f,h,e)})),i}b.exports=e},{}],86:[function(a,b){function c(a,b){return"DS.previous("+a+"[, "+b+"]): "}function d(a,b){var d=this;if(b=d.utils.resolveId(d.definitions[a],b),!d.definitions[a])throw new d.errors.NER(c(a,b)+a);if(!d.utils.isString(b)&&!d.utils.isNumber(b))throw new d.errors.IA(c(a,b)+"id: Must be a string or a number!");return angular.copy(d.store[a].previousAttributes[b])}b.exports=d},{}],87:[function(a,b){function c(a){return"DS.unlinkInverse("+a+", id[, relations]): "}function d(a,b){var c=this;c.utils.forEach(c.definitions,function(d){c.utils.forEach(d.relations,function(d){c.utils.forEach(d,function(d,e){a.name===e&&c.utils.forEach(d,function(a){c.utils.forEach(c.store[a.name].collection,function(d){if("hasMany"===a.type&&d[a.localField]){var e;c.utils.forEach(d[a.localField],function(a,c){a===b&&(e=c)}),void 0!==e&&d[a.localField].splice(e,1)}else d[a.localField]===b&&delete d[a.localField]})})})})})}function e(a,b,e){var f=this,g=f.errors.IA,h=f.definitions[a];if(e=e||[],b=f.utils.resolveId(h,b),!h)throw new f.errors.NER(c(a)+a);if(!f.utils.isString(b)&&!f.utils.isNumber(b))throw new g(c(a)+"id: Must be a string or a number!");if(!f.utils.isArray(e))throw new g(c(a)+"relations: Must be an array!");var i=f.get(a,b);return i&&(f.$rootScope.$$phase?d.call(f,h,i,e):f.$rootScope.$apply(function(){d.call(f,h,i,e)})),i}b.exports=e},{}],88:[function(a,b){function c(a){Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=a||"Illegal Argument!"}function d(a){Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=a||"RuntimeError Error!"}function e(a){Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.message=(a||"")+" is not a registered resource!"}c.prototype=new Error,c.prototype.constructor=c,d.prototype=new Error,d.prototype.constructor=d,e.prototype=new Error,e.prototype.constructor=e,b.exports=[function(){return{IllegalArgumentError:c,IA:c,RuntimeError:d,R:d,NonexistentResourceError:e,NER:e}}]},{}],89:[function(a){!function(b,c){"use strict";c.module("angular-data.DS",["ng"]).factory("DSUtils",a("./utils")).factory("DSErrors",a("./errors")).provider("DSHttpAdapter",a("./adapters/http")).provider("DSLocalStorageAdapter",a("./adapters/localStorage")).provider("DS",a("./datastore")).config(["$provide",function(a){a.decorator("$q",["$delegate",function(a){return a.promisify=function(a,b){if(a){if("function"!=typeof a)throw new Error("Can only promisify functions!");var c=this;return function(){var d=c.defer(),e=Array.prototype.slice.apply(arguments);e.push(function(a,b){a?d.reject(a):d.resolve(b)});try{var f=a.apply(b||this,e);f&&f.then&&f.then(d.resolve,d.reject)}catch(g){d.reject(g)}return d.promise}}},a}])}])}(window,window.angular)},{"./adapters/http":51,"./adapters/localStorage":52,"./datastore":64,"./errors":88,"./utils":90}],90:[function(a,b){function c(a){var b={};a=a||this,a.on=function(a,c,d){b[a]=b[a]||[],b[a].push({f:c,c:d})},a.off=function(a,c){var d=b[a];if(d)if(c){for(var e=0;e<d.length;e++)if(d[e]===c){d.splice(e,1);break}}else d.splice(0,d.length);else b={}},a.emit=function(){var a=Array.prototype.slice.call(arguments),c=b[a.shift()]||[];if(c)for(var d=0;d<c.length;d++)c[d].f.apply(c[d].c,a)
}}var d=a("./errors"),e=["beforeValidate","validate","afterValidate","beforeCreate","afterCreate","beforeUpdate","afterUpdate","beforeDestroy","afterDestroy"],f=angular.equals,g=a("../lib/observe-js/observe-js");g.setEqualityFn(f),b.exports=["$q",function(b){return{isBoolean:a("mout/lang/isBoolean"),isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isNumber:angular.isNumber,isFunction:angular.isFunction,isEmpty:a("mout/lang/isEmpty"),toJson:JSON.stringify,fromJson:angular.fromJson,makePath:a("mout/string/makePath"),upperCase:a("mout/string/upperCase"),pascalCase:a("mout/string/pascalCase"),deepMixIn:a("mout/object/deepMixIn"),deepEquals:f,mixIn:a("mout/object/mixIn"),forEach:angular.forEach,pick:a("mout/object/pick"),set:a("mout/object/set"),merge:a("mout/object/merge"),contains:a("mout/array/contains"),filter:a("mout/array/filter"),toLookup:a("mout/array/toLookup"),remove:a("mout/array/remove"),slice:a("mout/array/slice"),sort:a("mout/array/sort"),guid:a("mout/random/guid"),copy:angular.copy,keys:a("mout/object/keys"),observe:g,_:function(a,c){var f=this;if(c=c||{},c&&c.constructor===a.constructor)return c;if(!f.isObject(c))throw new d.IA('"options" must be an object!');f.forEach(e,function(a){"function"==typeof c[a]&&(c[a]=b.promisify(c[a]))});var g=function(a){f.mixIn(this,a)};return g.prototype=a,new g(c)},resolveItem:function(a,b){return a&&(this.isString(b)||this.isNumber(b))?a.index[b]||b:b},resolveId:function(a,b){return this.isString(b)||this.isNumber(b)?b:b&&a?b[a.idAttribute]||b:b},updateTimestamp:function(a){var b="function"==typeof Date.now?Date.now():(new Date).getTime();return a&&a>=b?a+1:b},deepFreeze:function h(a){if("function"==typeof Object.freeze){var b,c;Object.freeze(a);for(c in a)b=a[c],a.hasOwnProperty(c)&&"object"==typeof b&&!Object.isFrozen(b)&&h(b)}},diffObjectFromOldObject:g.diffObjectFromOldObject,Events:c}}]},{"../lib/observe-js/observe-js":1,"./errors":88,"mout/array/contains":2,"mout/array/filter":3,"mout/array/remove":7,"mout/array/slice":8,"mout/array/sort":9,"mout/array/toLookup":10,"mout/lang/isBoolean":17,"mout/lang/isEmpty":18,"mout/object/deepMixIn":28,"mout/object/keys":32,"mout/object/merge":33,"mout/object/mixIn":34,"mout/object/pick":36,"mout/object/set":37,"mout/random/guid":39,"mout/string/makePath":46,"mout/string/pascalCase":47,"mout/string/upperCase":50}]},{},[89]);